# WorkflowSession


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## WorkflowSession Class

The
[`WorkflowSession`](https://cj-mills.github.io/cjm-fasthtml-workflows/core/workflow_session.html#workflowsession)
class provides a scoped view of FastHTML session data for a specific
workflow. This prevents key collisions when multiple workflows are
active in the same application.

Each workflow gets its own namespace within the session, making it easy
to manage multi-step processes without worrying about overwriting data
from other workflows.

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-workflows/blob/main/cjm_fasthtml_workflows/core/workflow_session.py#L12"
target="_blank" style="float:right; font-size:smaller">source</a>

### WorkflowSession

>  WorkflowSession (sess:Any, workflow_id:str)

*Manage workflow state within FastHTML sessions with proper
namespacing.*

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>sess</td>
<td>Any</td>
<td>FastHTML session object (from route handler parameter)</td>
</tr>
<tr>
<td>workflow_id</td>
<td>str</td>
<td>Unique identifier for this workflow (e.g., “registration”,
“checkout”)</td>
</tr>
</tbody>
</table>

## Usage Examples

These examples demonstrate how to use
[`WorkflowSession`](https://cj-mills.github.io/cjm-fasthtml-workflows/core/workflow_session.html#workflowsession)
with a mock session object. In a real FastHTML application, the `sess`
parameter is automatically provided by the framework.

``` python
# Create a mock session (in FastHTML, this is provided automatically)
mock_session = {}

# Create workflow session for a registration workflow
workflow = WorkflowSession(mock_session, "registration")
workflow
```

    <__main__.WorkflowSession>

``` python
# Store some values
workflow.set("email", "user@example.com")
workflow.set("username", "john_doe")
workflow.set("step", 2)

# Show the underlying session (note the prefixed keys)
mock_session
```

    {'workflow_registration_email': 'user@example.com',
     '__registration_last_modified': 1761790891.4871387,
     'workflow_registration_username': 'john_doe',
     'workflow_registration_step': 2}

``` python
# Retrieve values
email = workflow.get("email")
username = workflow.get("username")
print(f"Email: {email}")
print(f"Username: {username}")
```

    Email: user@example.com
    Username: john_doe

``` python
# Get all workflow data
all_data = workflow.get_all()
print("All workflow data:")
all_data
```

    All workflow data:

    {'email': 'user@example.com', 'username': 'john_doe', 'step': 2}

``` python
# Check if key exists
has_email = workflow.has("email")
has_password = workflow.has("password")
print(f"Has email: {has_email}")
print(f"Has password: {has_password}")
```

    Has email: True
    Has password: False

``` python
# Create a second workflow in the same session - no collision!
checkout_workflow = WorkflowSession(mock_session, "checkout")
checkout_workflow.set("step", 1)  # Same key name, different workflow
checkout_workflow.set("cart_total", 99.99)

print(f"Registration step: {workflow.get('step')}")
print(f"Checkout step: {checkout_workflow.get('step')}")
print(f"\nSession now contains both workflows:")
mock_session
```

    Registration step: 2
    Checkout step: 1

    Session now contains both workflows:

    {'workflow_registration_email': 'user@example.com',
     '__registration_last_modified': 1761790891.4871387,
     'workflow_registration_username': 'john_doe',
     'workflow_registration_step': 2,
     'workflow_checkout_step': 1,
     '__checkout_last_modified': 1761790891.557961,
     'workflow_checkout_cart_total': 99.99}

``` python
# Delete a specific key
workflow.delete("step")
print(f"Step after deletion: {workflow.get('step', 'Not found')}")
workflow.get_all()
```

    Step after deletion: Not found

    {'email': 'user@example.com', 'username': 'john_doe'}

``` python
# Clear all workflow data
workflow.clear()
print("After clearing registration workflow:")
print(f"Registration data: {workflow.get_all()}")
print(f"Checkout data: {checkout_workflow.get_all()}")
print(f"\nSession (checkout workflow still intact):")
mock_session
```

    After clearing registration workflow:
    Registration data: {}
    Checkout data: {'step': 1, 'cart_total': 99.99}

    Session (checkout workflow still intact):

    {'__registration_last_modified': 1761790891.5890539,
     'workflow_checkout_step': 1,
     '__checkout_last_modified': 1761790891.557961,
     'workflow_checkout_cart_total': 99.99}

``` python
# Using with default values
empty_workflow = WorkflowSession({}, "empty")
value = empty_workflow.get("nonexistent", "default_value")
print(f"Value with default: {value}")
```

    Value with default: default_value
